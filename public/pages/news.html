<html>
<head>
    <link rel="stylesheet" type="text/css" href="/css/styles.css">
</head>
<body>
    <div id='news-container'>

    </div>
    
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.rawgit.com/alexcorvi/anchorme.js/gh-pages/dist-browser/anchorme.js"></script>
    <script src='/js/webService.js'></script>
    <script>
        'use strict'
        document.addEventListener("DOMContentLoaded", ready);
        function ready(){
            var container = document.getElementById('news-container');
            container.classList.add('wall_text');
            webService.getNews()
            .then(function(news) {
                    console.log( news);
                    for (var i = 0; i < news.length; i++) {
                        var outerDiv = document.createElement("div");
                        outerDiv.classList.add('post');

                        var header = document.createElement("div");
                        header.innerHTML = news.name;

                        var body = document.createElement("div");
                        body.innerHTML = (anchorme ? anchorme(news[i].text) : news[i].text) + '<br/>'; //find urls and anchor it

                        // outerDiv.appendChild(header);                        
                        outerDiv.appendChild(body);
                        if (news[i].photos){                                
                            for (var j = 0; j < news[i].photos.length; j++){
                                var img = document.createElement("img");
                                img.src = news[i].photos[j].src;
                                outerDiv.appendChild(img);
                            }
                        }

                        container.appendChild(outerDiv);
                    }
                });
        }
    </script>
</body>
</html>